COPY 	START	0
FIRST	STL     RETADR
.CLOOP	RDBUFF	F1,BUFFER,LENGTH
CLOOP		CLEAR	X
		CLEAR	A
		CLEAR	S
		+LDT	#4096
$LOOP	TD	    =X'F1'
		JEQ		$LOOP
		RD 	    =X'F1'
		COMPR	A,S
		JEQ		$EXIT
		STCH	BUFFER,X
		TIXR	$LOOP
$EXIT	STX		LENGTH
	    LDA		LENGTH
	    COMP	#0
	    JEQ 	ENDFIL
.	    WRBUFF	05,BUFFER,LENGTH
			CLEAR	X
		CLEAR	A
		CLEAR	S
		+LDT	#4096
$LOOP	TD	    =X'05'
		JEQ		$LOOP
		RD 	    =X'05'
		COMPR	A,S
		JEQ		$EXIT
		STCH	BUFFER,X
		TIXR	$LOOP
$EXIT	STX		LENGTH
	    J 		CLOOP
.ENDFIL	WRBUFF	05,EOF,THREE
ENDFIL		CLEAR	X
		CLEAR	A
		CLEAR	S
		+LDT	#4096
$LOOP	TD	    =X'05'
		JEQ		$LOOP
		RD 	    =X'05'
		COMPR	A,S
		JEQ		$EXIT
		STCH	EOF,X
		TIXR	$LOOP
$EXIT	STX		THREE
		J 		@RETADR
.CLOOP	RDBUFF	K@,allah,karim
CLOOP		CLEAR	X
		CLEAR	A
		CLEAR	S
		+LDT	#4096
$LOOP	TD	    =X'K@'
		JEQ		$LOOP
		RD 	    =X'K@'
		COMPR	A,S
		JEQ		$EXIT
		STCH	allah,X
		TIXR	$LOOP
$EXIT	STX		karim
EOF		BYTE	C'EOF'
THREE	WORD 	3
RETADR	RESW	1
LENGTH	RESW	1
BUFFER	RESB	4096
		END 	FIRST	    


NAMTAB OF MACRO : RDBUFF
DEFTAB OF MACRO : 
RDBUFF	MACRO	&INDEV,&BUFADR,&RECLTH
		CLEAR	X
		CLEAR	A
		CLEAR	S
		+LDT	#4096
$LOOP	TD	    =X'?1'
		JEQ		$LOOP
		RD 	    =X'?1'
		COMPR	A,S
		JEQ		$EXIT
		STCH	?2,X
		TIXR	$LOOP
$EXIT	STX		?3
		MEND


NAMTAB OF MACRO : WRBUFF
DEFTAB OF MACRO : 
WRBUFF	MACRO	&INDEV,&BUFADR,&RECLTH
		CLEAR	X
		CLEAR	A
		CLEAR	S
		+LDT	#4096
$LOOP	TD	    =X'?1'
		JEQ		$LOOP
		RD 	    =X'?1'
		COMPR	A,S
		JEQ		$EXIT
		STCH	?2,X
		TIXR	$LOOP
$EXIT	STX		?3
		MEND
